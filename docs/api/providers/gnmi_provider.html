

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>gNMI Service Provider &mdash; YANG Development Kit 0.8.6.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/width.css?v=6892ff54" />

  
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=d688945f"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Opendaylight Service Provider" href="odl_provider.html" />
    <link rel="prev" title="NETCONF Service Provider" href="netconf_provider.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            YANG Development Kit
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_ydk.html">About YDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../api_guide.html">API Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../class_hierarchy.html">YDK API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../services/services.html">Services</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="providers.html">Service Providers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="service_provider.html">ServiceProvider</a></li>
<li class="toctree-l4"><a class="reference internal" href="codec_provider.html">Codec Service Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="netconf_provider.html">NETCONF Service Provider</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">gNMI Service Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="odl_provider.html">Opendaylight Service Provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="restconf_provider.html">RESTCONF Service Provider</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../filters.html">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../types.html">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../errors.html">Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../path/path.html">YDK Path API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Questions and Answers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">YANG Development Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../api_guide.html">API Guide</a></li>
          <li class="breadcrumb-item"><a href="../class_hierarchy.html">YDK API</a></li>
          <li class="breadcrumb-item"><a href="providers.html">Service Providers</a></li>
      <li class="breadcrumb-item active">gNMI Service Provider</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gnmi-service-provider">
<h1>gNMI Service Provider<a class="headerlink" href="#gnmi-service-provider" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="ydk.gnmi.providers.gNMIServiceProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ydk.gnmi.providers.</span></span><span class="sig-name descname"><span class="pre">gNMIServiceProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port=57400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_certificate=&quot;&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">private_key=&quot;&quot;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ydk.gnmi.providers.gNMIServiceProvider" title="Link to this definition"></a></dt>
<dd><p>A service provider, which allows YDK connect to a <a class="reference external" href="https://github.com/openconfig/gnmi">gNMI</a> server. By default, the provider works in non-secure mode (tls is off). In order to enable secure mode connection the user must provide the gNMI server certificate of authorization (public key) and optionally the client (YDK application host) private key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repo</strong> – Instance of <a class="reference internal" href="../path/repository.html#ydk.path.Repository" title="ydk.path.Repository"><code class="xref py py-class docutils literal notranslate"><span class="pre">Repository</span></code></a> with path to local directory containing the the <a class="reference external" href="https://raw.githubusercontent.com/CiscoDevNet/ydk-gen/1344b3f22d746764f17536ac4e666836de4ba84d/sdk/cpp/core/tests/models/ydk%402016-02-26.yang">ydk yang model</a> along with all the yang models supported on the gNMI server.</p></li>
<li><p><strong>address</strong> – (<code class="docutils literal notranslate"><span class="pre">str</span></code>) Host address of the device supporting a gNMI interface</p></li>
<li><p><strong>port</strong> – (<code class="docutils literal notranslate"><span class="pre">int</span></code>)Port on which the gNMI interface can be accessed on the device. If not specified, the default value of <code class="docutils literal notranslate"><span class="pre">57400</span></code> is assigned.</p></li>
<li><p><strong>username</strong> – (<code class="docutils literal notranslate"><span class="pre">str</span></code>) Username.</p></li>
<li><p><strong>password</strong> – (<code class="docutils literal notranslate"><span class="pre">str</span></code>) Password.</p></li>
<li><p><strong>server_certificate</strong> – (<code class="docutils literal notranslate"><span class="pre">str</span></code>) Full path to a file, which contains server certificate of authorization (public key). If not specified, it is assumed non-secure connection to gNMI server.</p></li>
<li><p><strong>private_key</strong> – (<code class="docutils literal notranslate"><span class="pre">str</span></code>) Full path to a file, which contains private key of the application host. If not specified and <strong>server_certificate</strong> is defined (secure connection), the GRPC internally defined private key is used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>To enable YDK logging include the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">logging</span>
<span class="linenos">2</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;ydk&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="linenos">4</span><span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="linenos">5</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">((</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> - </span><span class="si">%(name)s</span><span class="s2"> - </span><span class="si">%(levelname)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="linenos">6</span><span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="linenos">7</span><span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
<p>To enable GRPC trace set environment variables as followed:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">export</span><span class="w"> </span><span class="nv">GRPC_VERBOSITY</span><span class="o">=</span>debug
<span class="linenos">2</span><span class="nb">export</span><span class="w"> </span><span class="nv">GRPC_TRACE</span><span class="o">=</span>transport_security
</pre></div>
</div>
<p>To get server certificate, you need to retrieve the <strong>ems.pem</strong> file from the IOS XR device (after enabling gRPC/TLS)
and put it to YDK application host in a folder, which is specific to the device.
You can find the <strong>ems.pem</strong> file on the router in either <strong>/misc/config/grpc/</strong> or <strong>/var/xr/config/grpc</strong> folder.</p>
<p>Example of instantiating and using objects of <code class="docutils literal notranslate"><span class="pre">gNMIServiceProvider</span></code> is shown below (assuming you have <code class="docutils literal notranslate"><span class="pre">openconfig</span></code> bundle installed).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">ydk.models.openconfig</span> <span class="kn">import</span> <span class="n">openconfig_bgp</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">ydk.path</span> <span class="kn">import</span> <span class="n">Repository</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">ydk.gnmi.providers</span> <span class="kn">import</span> <span class="n">gNMIServiceProvider</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">ydk.services</span> <span class="kn">import</span> <span class="n">CRUDService</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1"># Create repository with location of directory where yang models from the server are downloaded</span>
<span class="linenos"> 7</span><span class="n">repository</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span><span class="s1">&#39;/Users/test/yang_models_location&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">ca_file_path</span> <span class="o">=</span> <span class="s1">&#39;/Users/test/device-ip/ems.pem&#39;</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Instantiate provider with non-secure connection to gNMI server</span>
<span class="linenos">11</span><span class="n">provider</span> <span class="o">=</span> <span class="n">gNMIServiceProvider</span><span class="p">(</span><span class="n">repo</span><span class="o">=</span><span class="n">repository</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;10.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">57400</span><span class="p">,</span>
<span class="linenos">12</span>                               <span class="n">username</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="n">server_certificate</span><span class="o">=</span><span class="n">ca_file_path</span><span class="p">)</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c1"># Define filter</span>
<span class="linenos">15</span><span class="n">bgp</span> <span class="o">=</span> <span class="n">openconfig_bgp</span><span class="o">.</span><span class="n">Bgp</span><span class="p">()</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1"># Run CRUD read opearaion</span>
<span class="linenos">18</span><span class="n">crud</span> <span class="o">=</span> <span class="n">CRUDService</span><span class="p">()</span>
<span class="linenos">19</span><span class="n">bgp_read</span> <span class="o">=</span> <span class="n">crud</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">provider</span><span class="p">,</span> <span class="n">bgp</span><span class="p">)</span> <span class="c1"># Perform read operation</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="netconf_provider.html" class="btn btn-neutral float-left" title="NETCONF Service Provider" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="odl_provider.html" class="btn btn-neutral float-right" title="Opendaylight Service Provider" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>